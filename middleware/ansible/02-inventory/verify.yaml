---
# =============================================================================
# Lesson 02 - Verify Setup
# =============================================================================
# Run: ansible-playbook -i inventory/hosts.ini verify.yaml
# =============================================================================

- name: Verify Lesson 02 Setup
  hosts: all
  gather_facts: true

  tasks:
    - name: Display hostname
      ansible.builtin.debug:
        msg: "Connected to: {{ ansible_hostname }}"

    - name: Display OS info
      ansible.builtin.debug:
        msg: "OS: {{ ansible_distribution }} {{ ansible_distribution_version }}"

    - name: Display groups this host belongs to
      ansible.builtin.debug:
        msg: "Groups: {{ group_names }}"

    - name: Check Python version
      ansible.builtin.debug:
        msg: "Python: {{ ansible_python_version }}"

- name: Summary
  hosts: localhost
  connection: local
  gather_facts: false

  tasks:
    - name: Print verification complete
      ansible.builtin.debug:
        msg:
          - "================================"
          - "Lesson 02 Setup Verified!"
          - "================================"
          - "Hosts: {{ groups['all'] | join(', ') }}"
          - "Webservers: {{ groups['webservers'] | default([]) | join(', ') }}"
          - "Dbservers: {{ groups['dbservers'] | default([]) | join(', ') }}"
          - "================================"
          - "You're ready to start the lesson!"
          - "================================"
