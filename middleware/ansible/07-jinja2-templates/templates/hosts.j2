# {{ ansible_managed }}
# /etc/hosts - Generated by Ansible
# Host: {{ inventory_hostname }}
# Generated: {{ ansible_date_time.iso8601 }}

# Localhost entries
127.0.0.1   localhost localhost.localdomain
::1         localhost localhost.localdomain

# Ansible Managed Hosts
{% for host in groups['all'] %}
{% if hostvars[host]['ansible_default_ipv4'] is defined %}
{{ hostvars[host]['ansible_default_ipv4']['address'] }}  {{ host }} {{ hostvars[host]['ansible_hostname'] | default(host) }}
{% endif %}
{% endfor %}

# Group-specific entries
{% if 'webservers' in groups %}
# Web Servers
{% for host in groups['webservers'] %}
{% if hostvars[host]['ansible_default_ipv4'] is defined %}
# {{ host }} (webserver)
{% endif %}
{% endfor %}
{% endif %}

{% if 'dbservers' in groups %}
# Database Servers
{% for host in groups['dbservers'] %}
{% if hostvars[host]['ansible_default_ipv4'] is defined %}
# {{ host }} (database)
{% endif %}
{% endfor %}
{% endif %}
