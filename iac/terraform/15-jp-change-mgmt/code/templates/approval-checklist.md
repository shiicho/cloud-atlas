# 承認チェックリスト（Approval Checklist）

> Terraform Apply 前に確認すべき項目のチェックリストです。
> レビュアー・承認者は以下の項目を確認してから承認してください。

---

## 承認者情報

| 項目 | 内容 |
|------|------|
| 承認者 | @github-username |
| 承認日時 | YYYY-MM-DD HH:MM |
| PR番号 | #XXX |

---

## 1. Plan 内容確認

### 変更サマリー

```
Plan: X to add, Y to change, Z to destroy.
```

### 確認項目

- [ ] **追加リソース (add)** の内容を理解している
- [ ] **変更リソース (change)** の差分を確認した
- [ ] **削除リソース (destroy)** が意図したものである
- [ ] **再作成 (replace)** が発生する場合、影響を理解している

### 危険な変更のチェック

| 確認項目 | 結果 |
|----------|------|
| 本番 RDS の削除/再作成 | [ ] なし [ ] あり → 要確認 |
| 本番 EC2 の削除/再作成 | [ ] なし [ ] あり → 要確認 |
| Security Group ルール削除 | [ ] なし [ ] あり → 要確認 |
| IAM Role/Policy 削除 | [ ] なし [ ] あり → 要確認 |
| S3 Bucket 削除 | [ ] なし [ ] あり → 要確認 |
| VPC/Subnet 変更 | [ ] なし [ ] あり → 要確認 |

---

## 2. セキュリティ確認

### 機密情報チェック

- [ ] ハードコードされたパスワード/シークレットがない
- [ ] API キーが直接コードに含まれていない
- [ ] SSM Parameter Store / Secrets Manager を使用している

### IAM 権限チェック

- [ ] 最小権限の原則に従っている
- [ ] ワイルドカード (`*`) の使用が最小限である
- [ ] `iam:PassRole` の対象が限定されている

### ネットワークチェック

- [ ] セキュリティグループのルールが適切
- [ ] 0.0.0.0/0 への開放が必要最小限
- [ ] プライベートサブネットのリソースが公開されていない

---

## 3. コスト確認

### Infracost 結果（利用している場合）

| 項目 | 月額コスト |
|------|-----------|
| 現在のコスト | $XXX |
| 変更後のコスト | $XXX |
| 差額 | +/- $XXX |

### コスト確認項目

- [ ] 予想外の高額リソースがない
- [ ] 予算内である
- [ ] 不要になったリソースは削除されている

---

## 4. 影響範囲確認

### 影響を受けるサービス

| サービス | 影響内容 | 影響時間 |
|----------|----------|----------|
| | | |

### 依存関係確認

- [ ] 他チームのリソースに影響がない
- [ ] 依存するサービスへの通知済み（必要な場合）

---

## 5. 切り戻し手順確認

### 切り戻し可能性

- [ ] `git revert` + `terraform apply` で切り戻し可能
- [ ] 手動切り戻し手順が記載されている
- [ ] 切り戻し判断基準が明確である

### 切り戻し所要時間

- 推定時間: __ 分

---

## 6. 変更凍結期間確認

### 現在の日付チェック

| 凍結期間 | 該当 |
|----------|------|
| 年末年始（12/28〜1/3） | [ ] 該当しない |
| ゴールデンウィーク（4/29〜5/5） | [ ] 該当しない |
| 決算期末（3月末/9月末） | [ ] 該当しない |
| お盆（8/13〜8/16）※会社による | [ ] 該当しない |

### 凍結期間中の場合

- [ ] 緊急変更として承認を取得済み
- [ ] 上長の承認を得ている
- [ ] Break-glass 手順に従っている

---

## 7. 実施体制確認

### 実施者情報

| 役割 | 担当者 | 連絡可能 |
|------|--------|----------|
| 実施者 | @username | [ ] 可 |
| 確認者 | @username | [ ] 可 |
| エスカレーション先 | @username | [ ] 可 |

### 実施タイミング

- [ ] 営業時間内に実施可能
- [ ] 必要に応じて待機可能
- [ ] 監視体制が確保されている

---

## 8. ドキュメント確認

- [ ] 変更管理書が完成している
- [ ] 変更内容が適切に記載されている
- [ ] 関連チケットがリンクされている

---

## 承認決定

### 承認結果

- [ ] **承認する** - Apply を許可します
- [ ] **条件付き承認** - 以下の条件を満たした後に承認します
  - 条件:
- [ ] **却下** - 以下の理由により却下します
  - 理由:

### 承認者コメント

```
コメントを記載
```

### 署名

- 承認者: @github-username
- 承認日時: YYYY-MM-DD HH:MM (JST)

---

## 承認後の注意事項

1. **Apply 実行者** は承認を確認してから実行すること
2. **Apply 後** は結果を確認し、変更管理書に記録すること
3. **問題発生時** は速やかにエスカレーションすること

---

*このチェックリストは [cloud-atlas Terraform 課程](https://github.com/shiicho/cloud-atlas) の一部です。*
