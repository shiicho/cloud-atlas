# 変更管理書（Change Request Template）

> 本テンプレートは GitHub Pull Request の Description として使用します。
> Terraform 変更時は必ずこのフォーマットに従ってください。

---

## 変更申請情報

| 項目 | 内容 |
|------|------|
| 申請日 | YYYY-MM-DD |
| 申請者 | @github-username |
| 変更ID | CHG-YYYYMMDD-NNN |
| 優先度 | [ ] 通常 [ ] 緊急 |

---

## 1. 変更概要（Summary）

### 変更タイトル
<!-- 変更内容を一言で説明 -->


### 変更目的
<!-- なぜこの変更が必要か -->


### 関連チケット
<!-- JIRA/Backlog/GitHub Issue などのリンク -->
- Issue: #
- Ticket:

---

## 2. 変更内容（Details）

### 対象リソース
<!-- 変更対象の AWS リソースをリストアップ -->

| リソースタイプ | リソース名/ID | 変更内容 |
|---------------|--------------|----------|
| EC2 Instance | i-0123456789abcdef0 | インスタンスタイプ変更 |
| Security Group | sg-0123456789abcdef0 | ルール追加 |
| | | |

### Terraform Plan 出力
<!-- `terraform plan` の結果を貼り付け -->
```
# terraform plan

Plan: X to add, Y to change, Z to destroy.
```

### 変更されるファイル
<!-- 変更した .tf ファイルをリストアップ -->
- [ ] main.tf
- [ ] variables.tf
- [ ] outputs.tf
- [ ] modules/xxx/

---

## 3. 影響範囲（Impact Analysis）

### 影響を受けるサービス/システム
<!-- この変更が影響するサービスやシステム -->


### 想定されるダウンタイム
- [ ] ダウンタイムなし
- [ ] 短時間の中断あり（約 __ 分）
- [ ] メンテナンスウィンドウが必要

### リスク評価
| リスク | 発生可能性 | 影響度 | 対策 |
|--------|-----------|--------|------|
| | 低/中/高 | 低/中/高 | |

---

## 4. 切り戻し手順（Rollback Plan）

### 自動切り戻し（推奨）
```bash
# Git で前の状態に戻して apply
git revert HEAD
terraform apply
```

### 手動切り戻し
<!-- 自動で戻せない場合の手順 -->
1.
2.
3.

### 切り戻し判断基準
<!-- いつ切り戻しを判断するか -->
- [ ] エラーログが X 件以上
- [ ] レスポンスタイムが Y ms 以上
- [ ] ユーザー影響報告あり

---

## 5. 実施計画（Execution Plan）

### 実施予定日時
- 日時: YYYY-MM-DD HH:MM (JST)
- 所要時間: 約 __ 分

### 実施担当者
| 役割 | 担当者 | 連絡先 |
|------|--------|--------|
| 実施者 | @username | |
| 確認者 | @username | |
| エスカレーション先 | @username | |

### 確認項目
<!-- Apply 後の確認事項 -->
- [ ] リソースが正常に作成/更新された
- [ ] サービスが正常に稼働している
- [ ] 監視アラートが発生していない
- [ ] ログにエラーが出ていない

---

## 6. 承認チェックリスト

### レビュアー確認項目
- [ ] Plan 内容を確認しました
- [ ] 意図しない変更（destroy/recreate）がないことを確認しました
- [ ] セキュリティ上の問題がないことを確認しました
- [ ] コスト影響を確認しました
- [ ] 切り戻し手順を確認しました

### 承認者
| 承認者 | 承認日 | コメント |
|--------|--------|----------|
| @approver1 | | |
| @approver2 | | |

---

## 7. 変更凍結チェック

### 現在の日付と凍結期間
- [ ] 年末年始（12/28〜1/3）ではない
- [ ] ゴールデンウィーク（4/29〜5/5）ではない
- [ ] 決算期末（3/25〜3/31, 9/25〜9/30）ではない

### 緊急変更の場合
- [ ] 緊急変更として承認を取得済み
- [ ] Break-glass 手順に従っている
- [ ] 事後報告書を作成する

---

## 8. 関連ドキュメント

- 設計書: <!-- リンク -->
- 運用手順書: <!-- リンク -->
- 監視設定: <!-- リンク -->

---

## 変更完了後の記録

### 実施結果
- [ ] 成功
- [ ] 一部失敗（詳細を記載）
- [ ] 切り戻し実施

### 実施ログ
```
# 実施時のログを貼り付け
```

### 完了確認
- 完了日時: YYYY-MM-DD HH:MM
- 確認者: @username

---

*このテンプレートは [cloud-atlas Terraform 課程](https://github.com/shiicho/cloud-atlas) の一部です。*
