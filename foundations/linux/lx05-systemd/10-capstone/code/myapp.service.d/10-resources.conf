# =============================================================================
# 10-resources.conf - Resource Limits for MyApp
# =============================================================================
# Drop-in file for resource control
#
# Memory: Prevents OOM and protects other services
# CPU: Ensures fair sharing with production workloads
# Tasks: Fork bomb protection
# =============================================================================

[Service]
# -----------------------------------------------------------------------------
# CPU Limits
# -----------------------------------------------------------------------------
# Hard limit: Maximum 50% of one CPU core
CPUQuota=50%

# Soft limit: Lower priority when competing for CPU
CPUWeight=80

# -----------------------------------------------------------------------------
# Memory Limits
# -----------------------------------------------------------------------------
# Hard limit: Kill if exceeds 512MB
MemoryMax=512M

# Soft limit: Apply pressure at 400MB
MemoryHigh=400M

# Disable swap (prevent performance degradation)
MemorySwapMax=0

# -----------------------------------------------------------------------------
# Process Limits
# -----------------------------------------------------------------------------
# Maximum tasks (processes + threads) - fork bomb protection
TasksMax=64

# -----------------------------------------------------------------------------
# I/O Limits (optional)
# -----------------------------------------------------------------------------
# Lower I/O priority for batch-like workloads
IOWeight=80

# -----------------------------------------------------------------------------
# Traditional Limits
# -----------------------------------------------------------------------------
# Maximum open files
LimitNOFILE=65535
