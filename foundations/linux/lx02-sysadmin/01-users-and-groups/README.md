# 01 - ç”¨æˆ·ä¸ç”¨æˆ·ç»„ï¼ˆUsers and Groupsï¼‰

> **ç›®æ ‡**ï¼šæŒæ¡ Linux å¤šç”¨æˆ·ç³»ç»Ÿçš„è´¦æˆ·ç®¡ç†ï¼Œå­¦ä¼šåˆ›å»ºå’Œç®¡ç†ç”¨æˆ·ä¸ç»„  
> **å‰ç½®**ï¼šåŸºç¡€ Linux å‘½ä»¤è¡Œæ“ä½œï¼ˆcd, ls, cat, nano/vimï¼‰  
> **æ—¶é—´**ï¼šâš¡ 25 åˆ†é’Ÿï¼ˆé€Ÿè¯»ï¼‰/ ğŸ”¬ 90 åˆ†é’Ÿï¼ˆå®Œæ•´å®æ“ï¼‰  
> **å®æˆ˜åœºæ™¯**ï¼šæ–°å‘˜å·¥å…¥èŒæ—¶çš„è´¦æˆ·åˆ›å»ºä¸æƒé™åˆ†é…  

---

## å°†å­¦åˆ°çš„å†…å®¹

1. ç†è§£ Linux å¤šç”¨æˆ·æ¨¡å‹ï¼ˆmulti-user modelï¼‰
2. è¯»æ‡‚ /etc/passwd å’Œ /etc/group æ–‡ä»¶ç»“æ„
3. åŒºåˆ† UID/GID çš„ä¸åŒèŒƒå›´ï¼ˆç³»ç»Ÿè´¦æˆ· vs æ™®é€šç”¨æˆ·ï¼‰
4. ä½¿ç”¨ useraddã€usermodã€userdel ç®¡ç†ç”¨æˆ·
5. ä½¿ç”¨ groupaddã€groupmodã€groupdel ç®¡ç†ç”¨æˆ·ç»„
6. ç†è§£ä¸»ç»„ï¼ˆprimary groupï¼‰ä¸é™„åŠ ç»„ï¼ˆsupplementary groupsï¼‰

---

## å…ˆè·‘èµ·æ¥ï¼ï¼ˆ5 åˆ†é’Ÿï¼‰

> åœ¨å­¦ä¹ ç†è®ºä¹‹å‰ï¼Œå…ˆä½“éªŒç”¨æˆ·ç®¡ç†çš„åŸºæœ¬æ“ä½œã€‚  
> è¿è¡Œè¿™äº›å‘½ä»¤ï¼Œè§‚å¯Ÿè¾“å‡º -- è¿™å°±æ˜¯ä½ å°†è¦æŒæ¡çš„æŠ€èƒ½ã€‚  

```bash
# æŸ¥çœ‹å½“å‰ç”¨æˆ·ä¿¡æ¯
whoami
id

# æŸ¥çœ‹ç³»ç»Ÿä¸­æœ‰å“ªäº›ç”¨æˆ·ï¼ˆåªçœ‹ç”¨æˆ·åï¼‰
cut -d: -f1 /etc/passwd | head -10

# æŸ¥çœ‹ç³»ç»Ÿä¸­æœ‰å“ªäº›ç»„
cut -d: -f1 /etc/group | head -10

# æŸ¥çœ‹è‡ªå·±å±äºå“ªäº›ç»„
groups

# æŸ¥çœ‹ /etc/passwd ä¸­è‡ªå·±çš„è®°å½•
grep "^$(whoami):" /etc/passwd
```

**ä½ åˆšåˆšæŸ¥çœ‹äº† Linux ç³»ç»Ÿçš„ç”¨æˆ·å’Œç»„ä¿¡æ¯ï¼**

Linux æ˜¯**å¤šç”¨æˆ·æ“ä½œç³»ç»Ÿ**ï¼šå¤šä¸ªç”¨æˆ·å¯ä»¥åŒæ—¶ä½¿ç”¨åŒä¸€å°æœºå™¨ï¼Œæ¯ä¸ªç”¨æˆ·æœ‰ç‹¬ç«‹çš„èº«ä»½ã€æ–‡ä»¶å’Œæƒé™ã€‚

ç°åœ¨è®©æˆ‘ä»¬æ·±å…¥ç†è§£èƒŒåçš„åŸç†ã€‚

---

## Step 1 -- å¤šç”¨æˆ·æ¨¡å‹ï¼šä¸ºä»€ä¹ˆéœ€è¦ç”¨æˆ·ï¼Ÿï¼ˆ10 åˆ†é’Ÿï¼‰

### 1.1 Linux çš„å¤šç”¨æˆ·è®¾è®¡

![Linux Multi-User Model](images/multi-user-model.png)

<details>
<summary>View ASCII source</summary>

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Linux ç³»ç»Ÿ                                   â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  root    â”‚  â”‚  alice   â”‚  â”‚   bob    â”‚  â”‚  nginx   â”‚        â”‚
â”‚  â”‚ (ç®¡ç†å‘˜) â”‚  â”‚ (å¼€å‘è€…) â”‚  â”‚ (å¼€å‘è€…) â”‚  â”‚ (æœåŠ¡)  â”‚        â”‚
â”‚  â”‚ UID=0    â”‚  â”‚ UID=1000 â”‚  â”‚ UID=1001 â”‚  â”‚ UID=998  â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜        â”‚
â”‚       â”‚             â”‚             â”‚             â”‚               â”‚
â”‚       â–¼             â–¼             â–¼             â–¼               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ /root    â”‚  â”‚/home/aliceâ”‚ â”‚/home/bob â”‚  â”‚/var/www  â”‚        â”‚
â”‚  â”‚ å®Œå…¨æƒé™ â”‚  â”‚ ä¸ªäººæ–‡ä»¶  â”‚ â”‚ ä¸ªäººæ–‡ä»¶ â”‚  â”‚ æœåŠ¡æ–‡ä»¶ â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                  â”‚
â”‚  èµ„æºéš”ç¦» + æƒé™æ§åˆ¶ = å®‰å…¨çš„å¤šç”¨æˆ·ç¯å¢ƒ                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

</details>

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦å¤šç”¨æˆ·ï¼Ÿ

| éœ€æ±‚ | è§£å†³æ–¹æ¡ˆ |
|------|----------|
| **éš”ç¦»** | æ¯ä¸ªç”¨æˆ·æœ‰ç‹¬ç«‹çš„ home ç›®å½• |
| **æƒé™** | æ–‡ä»¶æ‰€æœ‰æƒæ§åˆ¶è°èƒ½è¯»å†™ |
| **å®¡è®¡** | è°åšäº†ä»€ä¹ˆæ“ä½œæœ‰è¿¹å¯æŸ¥ |
| **æœåŠ¡** | æ¯ä¸ªæœåŠ¡ä»¥ç‹¬ç«‹ç”¨æˆ·è¿è¡Œï¼ˆnginx, mysqlï¼‰ |

### 1.3 ä¸¤ç±»ç”¨æˆ·

| ç±»å‹ | UID èŒƒå›´ | ç‰¹ç‚¹ | ç¤ºä¾‹ |
|------|----------|------|------|
| ç³»ç»Ÿç”¨æˆ· | 0-999 | è¿è¡ŒæœåŠ¡ï¼Œæ— äº¤äº’ç™»å½• | root, nginx, mysql |
| æ™®é€šç”¨æˆ· | 1000+ | çœŸäººä½¿ç”¨ï¼Œå¯äº¤äº’ç™»å½• | alice, bob, tanaka |

> **UID 0 æ˜¯ç‰¹æ®Šçš„**ï¼šåªæœ‰ UID=0 çš„ç”¨æˆ·ï¼ˆå³ rootï¼‰æ‹¥æœ‰ç³»ç»Ÿå®Œå…¨æ§åˆ¶æƒã€‚  

---

## Step 2 -- /etc/passwdï¼šç”¨æˆ·æ•°æ®åº“ï¼ˆ15 åˆ†é’Ÿï¼‰

### 2.1 æŸ¥çœ‹ passwd æ–‡ä»¶

```bash
# æŸ¥çœ‹æ–‡ä»¶å‰ 10 è¡Œ
head -10 /etc/passwd

# æŸ¥çœ‹æŸä¸ªå…·ä½“ç”¨æˆ·
grep "^root:" /etc/passwd
```

### 2.2 å­—æ®µè§£æ

æ¯è¡Œä»£è¡¨ä¸€ä¸ªç”¨æˆ·ï¼Œç”¨å†’å· `:` åˆ†éš” 7 ä¸ªå­—æ®µï¼š

![/etc/passwd Field Structure](images/passwd-structure.png)

<details>
<summary>View ASCII source</summary>

```
root:x:0:0:root:/root:/bin/bash
 â”‚   â”‚ â”‚ â”‚  â”‚     â”‚      â”‚
 â”‚   â”‚ â”‚ â”‚  â”‚     â”‚      â””â”€ 7. ç™»å½• Shellï¼ˆlogin shellï¼‰
 â”‚   â”‚ â”‚ â”‚  â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€ 6. å®¶ç›®å½•ï¼ˆhome directoryï¼‰
 â”‚   â”‚ â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 5. æ³¨é‡Š/å…¨åï¼ˆGECOS fieldï¼‰
 â”‚   â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 4. ä¸»ç»„ GIDï¼ˆprimary group IDï¼‰
 â”‚   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 3. ç”¨æˆ· UIDï¼ˆuser IDï¼‰
 â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 2. å¯†ç å ä½ç¬¦ï¼ˆå®é™…åœ¨ /etc/shadowï¼‰
 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 1. ç”¨æˆ·åï¼ˆusernameï¼‰
```

</details>

### 2.3 åŠ¨æ‰‹è§£æ

```bash
# è§£æå½“å‰ç”¨æˆ·çš„ä¿¡æ¯
grep "^$(whoami):" /etc/passwd

# ä½¿ç”¨ awk åˆ†è§£å­—æ®µ
grep "^$(whoami):" /etc/passwd | awk -F: '{
    print "ç”¨æˆ·å: " $1
    print "UID:    " $3
    print "GID:    " $4
    print "æ³¨é‡Š:   " $5
    print "å®¶ç›®å½•: " $6
    print "Shell:  " $7
}'
```

### 2.4 å¸¸è§ Shell è®¾ç½®

| Shell | ç”¨é€” |
|-------|------|
| `/bin/bash` | æ™®é€šäº¤äº’ç”¨æˆ· |
| `/bin/sh` | è„šæœ¬æˆ–å…¼å®¹æ€§éœ€æ±‚ |
| `/sbin/nologin` | ç¦æ­¢ç™»å½•ï¼ˆæœåŠ¡è´¦æˆ·ï¼‰ |
| `/bin/false` | ç¦æ­¢ç™»å½•ï¼ˆæ›´ä¸¥æ ¼ï¼‰ |

```bash
# æŸ¥çœ‹å“ªäº›ç”¨æˆ·ä¸èƒ½ç™»å½•
grep -E 'nologin|false' /etc/passwd | cut -d: -f1
```

---

## Step 3 -- /etc/groupï¼šç»„æ•°æ®åº“ï¼ˆ10 åˆ†é’Ÿï¼‰

### 3.1 æŸ¥çœ‹ group æ–‡ä»¶

```bash
# æŸ¥çœ‹æ–‡ä»¶å‰ 10 è¡Œ
head -10 /etc/group

# æŸ¥çœ‹ç‰¹å®šç»„
grep "^wheel:" /etc/group    # RHEL/CentOS
grep "^sudo:" /etc/group     # Debian/Ubuntu
```

### 3.2 å­—æ®µè§£æ

![/etc/group Field Structure](images/group-structure.png)

<details>
<summary>View ASCII source</summary>

```
devteam:x:1002:alice,bob,tanaka
   â”‚    â”‚   â”‚        â”‚
   â”‚    â”‚   â”‚        â””â”€ 4. ç»„æˆå‘˜åˆ—è¡¨ï¼ˆé€—å·åˆ†éš”ï¼‰
   â”‚    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 3. ç»„ GID
   â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 2. å¯†ç å ä½ç¬¦ï¼ˆå¾ˆå°‘ä½¿ç”¨ï¼‰
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 1. ç»„å
```

</details>

### 3.3 ä¸»ç»„ vs é™„åŠ ç»„

| ç±»å‹ | è¯´æ˜ | å­˜å‚¨ä½ç½® |
|------|------|----------|
| ä¸»ç»„ï¼ˆprimary groupï¼‰ | ç”¨æˆ·åˆ›å»ºæ–‡ä»¶æ—¶çš„é»˜è®¤ç»„ | /etc/passwd ç¬¬ 4 å­—æ®µ |
| é™„åŠ ç»„ï¼ˆsupplementary groupsï¼‰ | ç”¨æˆ·é¢å¤–æ‰€å±çš„ç»„ | /etc/group ç¬¬ 4 å­—æ®µ |

```bash
# æŸ¥çœ‹è‡ªå·±çš„ç»„ä¿¡æ¯
id

# è¾“å‡ºç¤ºä¾‹ï¼š
# uid=1000(alice) gid=1000(alice) groups=1000(alice),27(sudo),1002(devteam)
#                  â”‚                       â”‚
#                  ä¸»ç»„                     é™„åŠ ç»„
```

---

## Step 4 -- ç”¨æˆ·ç®¡ç†å‘½ä»¤ï¼ˆ20 åˆ†é’Ÿï¼‰

> **æ³¨æ„**ï¼šä»¥ä¸‹å‘½ä»¤éœ€è¦ root æƒé™ï¼ˆä½¿ç”¨ sudoï¼‰  

### 4.1 åˆ›å»ºç”¨æˆ·ï¼šuseradd

```bash
# åŸºç¡€è¯­æ³•
sudo useradd [é€‰é¡¹] ç”¨æˆ·å

# åˆ›å»ºæ ‡å‡†ç”¨æˆ·ï¼ˆæ¨èæ–¹å¼ï¼‰
sudo useradd -m -s /bin/bash developer
#             â”‚        â”‚
#             â”‚        â””â”€ æŒ‡å®š login shell
#             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ åˆ›å»º home ç›®å½•

# éªŒè¯ç”¨æˆ·å·²åˆ›å»º
grep "^developer:" /etc/passwd
ls -la /home/developer
```

**å¸¸ç”¨é€‰é¡¹**ï¼š

| é€‰é¡¹ | å«ä¹‰ | ç¤ºä¾‹ |
|------|------|------|
| `-m` | åˆ›å»º home ç›®å½• | `-m` |
| `-s` | æŒ‡å®š shell | `-s /bin/bash` |
| `-c` | æ·»åŠ æ³¨é‡Š | `-c "Developer Account"` |
| `-u` | æŒ‡å®š UID | `-u 1500` |
| `-g` | æŒ‡å®šä¸»ç»„ | `-g developers` |
| `-G` | æŒ‡å®šé™„åŠ ç»„ | `-G docker,sudo` |
| `-d` | æŒ‡å®š home è·¯å¾„ | `-d /opt/developer` |

### 4.2 è®¾ç½®å¯†ç ï¼špasswd

```bash
# ä¸ºç”¨æˆ·è®¾ç½®å¯†ç 
sudo passwd developer
# ä¼šæç¤ºè¾“å…¥ä¸¤æ¬¡å¯†ç 

# æŸ¥çœ‹å¯†ç çŠ¶æ€
sudo passwd -S developer
# è¾“å‡ºï¼šdeveloper PS 2026-01-04 0 99999 7 -1 (Password set...)
```

### 4.3 ä¿®æ”¹ç”¨æˆ·ï¼šusermod

```bash
# æ·»åŠ ç”¨æˆ·åˆ°é™„åŠ ç»„ï¼ˆä¿ç•™åŸæœ‰ç»„ï¼‰
sudo usermod -aG docker developer
#             â”‚
#             â””â”€ -a = appendï¼ˆè¿½åŠ ï¼‰ï¼Œä¸åŠ ä¼šè¦†ç›–æ‰€æœ‰é™„åŠ ç»„ï¼

# ä¿®æ”¹ç™»å½• shell
sudo usermod -s /bin/zsh developer

# é”å®šè´¦æˆ·
sudo usermod -L developer

# è§£é”è´¦æˆ·
sudo usermod -U developer

# éªŒè¯ä¿®æ”¹
id developer
```

> **é‡è¦**ï¼š`usermod -G` ä¸å¸¦ `-a` ä¼š**è¦†ç›–**æ‰€æœ‰é™„åŠ ç»„ï¼  

### 4.4 åˆ é™¤ç”¨æˆ·ï¼šuserdel

```bash
# åªåˆ é™¤ç”¨æˆ·ï¼ˆä¿ç•™ home ç›®å½•ï¼‰
sudo userdel developer

# åˆ é™¤ç”¨æˆ·å¹¶æ¸…ç† home ç›®å½•
sudo userdel -r developer
#             â”‚
#             â””â”€ åˆ é™¤ home ç›®å½•å’Œé‚®ä»¶

# éªŒè¯ç”¨æˆ·å·²åˆ é™¤
grep "^developer:" /etc/passwd    # åº”è¯¥æ— è¾“å‡º
```

---

## Step 5 -- ç»„ç®¡ç†å‘½ä»¤ï¼ˆ15 åˆ†é’Ÿï¼‰

### 5.1 åˆ›å»ºç»„ï¼šgroupadd

```bash
# åˆ›å»ºæ–°ç»„
sudo groupadd devteam

# æŒ‡å®š GID åˆ›å»º
sudo groupadd -g 2000 qagroup

# éªŒè¯
grep "^devteam:" /etc/group
```

### 5.2 ä¿®æ”¹ç»„ï¼šgroupmod

```bash
# é‡å‘½åç»„
sudo groupmod -n dev-team devteam

# ä¿®æ”¹ GID
sudo groupmod -g 2001 dev-team

# éªŒè¯
grep "dev-team" /etc/group
```

### 5.3 åˆ é™¤ç»„ï¼šgroupdel

```bash
# åˆ é™¤ç»„
sudo groupdel dev-team

# æ³¨æ„ï¼šä¸èƒ½åˆ é™¤ä½œä¸ºæŸç”¨æˆ·ä¸»ç»„çš„ç»„
```

### 5.4 æŸ¥çœ‹ç»„æˆå‘˜

```bash
# æ–¹æ³• 1ï¼šä½¿ç”¨ getent
getent group devteam

# æ–¹æ³• 2ï¼šä½¿ç”¨ members å‘½ä»¤ï¼ˆéœ€å®‰è£…ï¼‰
# sudo apt install members    # Debian/Ubuntu
# members devteam

# æ–¹æ³• 3ï¼šä½¿ç”¨ lidï¼ˆRHEL/CentOSï¼‰
# lid -g devteam
```

---

## Step 6 -- åŠ¨æ‰‹å®éªŒï¼šæ–°å‘˜å·¥å…¥èŒï¼ˆ15 åˆ†é’Ÿï¼‰

> **åœºæ™¯**ï¼šä½ æ˜¯ç³»ç»Ÿç®¡ç†å‘˜ï¼Œæ–°å‘˜å·¥ç”°ä¸­ï¼ˆtanakaï¼‰å…¥èŒå¼€å‘éƒ¨é—¨ã€‚  
> éœ€è¦ä¸ºä»–åˆ›å»ºè´¦æˆ·å¹¶åˆ†é…åˆ°å¼€å‘ç»„ã€‚  

### 6.1 åˆ›å»ºå¼€å‘ç»„

```bash
# æ£€æŸ¥ç»„æ˜¯å¦å­˜åœ¨
grep "^devteam:" /etc/group || sudo groupadd devteam
```

### 6.2 åˆ›å»ºç”¨æˆ·

```bash
# åˆ›å»ºç”¨æˆ·å¹¶è®¾ç½®ä¸»ç»„ã€é™„åŠ ç»„
sudo useradd -m \
    -s /bin/bash \
    -c "Tanaka - Developer" \
    -G devteam \
    tanaka

# è®¾ç½®å¯†ç 
sudo passwd tanaka
```

### 6.3 éªŒè¯

```bash
# æ£€æŸ¥ç”¨æˆ·ä¿¡æ¯
id tanaka

# æ£€æŸ¥ passwd è®°å½•
grep "^tanaka:" /etc/passwd

# æ£€æŸ¥ home ç›®å½•
ls -la /home/tanaka

# æ£€æŸ¥ç»„æˆå‘˜
grep "^devteam:" /etc/group
```

### 6.4 æµ‹è¯•ç™»å½•

```bash
# åˆ‡æ¢åˆ°æ–°ç”¨æˆ·ï¼ˆéœ€è¦å¯†ç ï¼‰
su - tanaka

# éªŒè¯èº«ä»½
whoami
id
pwd    # åº”è¯¥æ˜¯ /home/tanaka

# é€€å‡º
exit
```

### 6.5 æ¸…ç†ï¼ˆå¯é€‰ï¼‰

```bash
# åˆ é™¤æµ‹è¯•ç”¨æˆ·å’Œç»„
sudo userdel -r tanaka
sudo groupdel devteam 2>/dev/null
```

---

## åæ¨¡å¼ï¼šå¸¸è§é”™è¯¯

### é”™è¯¯ 1ï¼šåˆ›å»ºç”¨æˆ·æ—¶å¿˜è®° -m

```bash
# é”™è¯¯ï¼šæ²¡æœ‰ -mï¼Œä¸åˆ›å»º home ç›®å½•
sudo useradd developer
# ç”¨æˆ·æ²¡æœ‰ home ç›®å½•ï¼Œæ— æ³•æ­£å¸¸å·¥ä½œ

# æ­£ç¡®ï¼šå§‹ç»ˆä¸ºäº¤äº’ç”¨æˆ·åˆ›å»º home ç›®å½•
sudo useradd -m -s /bin/bash developer
```

**åæœ**ï¼šç”¨æˆ·ç™»å½•åå·¥ä½œç›®å½•æ˜¯ `/`ï¼Œæ— æ³•ä¿å­˜ä¸ªäººæ–‡ä»¶ã€‚

### é”™è¯¯ 2ï¼šæ™®é€šç”¨æˆ·ä½¿ç”¨ UID < 1000

```bash
# é”™è¯¯ï¼šä¸ºæ™®é€šç”¨æˆ·æŒ‡å®šç³»ç»Ÿ UID
sudo useradd -u 500 developer
# å¯èƒ½ä¸ç³»ç»Ÿè´¦æˆ·å†²çª

# æ­£ç¡®ï¼šæ™®é€šç”¨æˆ·ä½¿ç”¨ UID >= 1000
sudo useradd -m developer    # è®©ç³»ç»Ÿè‡ªåŠ¨åˆ†é…
```

**åæœ**ï¼šå¯èƒ½ä¸è½¯ä»¶åŒ…åˆ›å»ºçš„ç³»ç»Ÿç”¨æˆ·å†²çªï¼Œå¯¼è‡´æƒé™æ··ä¹±ã€‚

### é”™è¯¯ 3ï¼šåˆ é™¤ç”¨æˆ·ä¸æ¸…ç† home ç›®å½•

```bash
# é”™è¯¯ï¼šåªåˆ é™¤ç”¨æˆ·è®°å½•
sudo userdel developer
# home ç›®å½• /home/developer ä»ç„¶å­˜åœ¨ï¼Œå ç”¨ç©ºé—´

# æ­£ç¡®ï¼šè¿åŒ home ç›®å½•ä¸€èµ·åˆ é™¤
sudo userdel -r developer
```

**åæœ**ï¼šé—ç•™æ–‡ä»¶å ç”¨ç£ç›˜ç©ºé—´ï¼Œä¸”å¯èƒ½åŒ…å«æ•æ„Ÿä¿¡æ¯ã€‚

### é”™è¯¯ 4ï¼šusermod -G ä¸å¸¦ -a

```bash
# å±é™©ï¼è¿™ä¼šè¦†ç›–æ‰€æœ‰é™„åŠ ç»„
sudo usermod -G newgroup developer
# developer ç°åœ¨åªå±äº newgroupï¼ŒåŸæ¥çš„ dockerã€sudo ç­‰ç»„éƒ½æ²¡äº†

# æ­£ç¡®ï¼šä½¿ç”¨ -aG è¿½åŠ ç»„
sudo usermod -aG newgroup developer
```

**åæœ**ï¼šç”¨æˆ·çªç„¶å¤±å» dockerã€sudo ç­‰æƒé™ï¼Œå¯èƒ½å¯¼è‡´å·¥ä½œä¸­æ–­ã€‚

---

## èŒåœºå°è´´å£«ï¼ˆJapan IT Contextï¼‰

### è´¦æˆ·ç®¡ç†ï¼ˆã‚¢ã‚«ã‚¦ãƒ³ãƒˆç®¡ç†ï¼‰

åœ¨æ—¥æœ¬ IT ä¼ä¸šï¼Œè´¦æˆ·ç®¡ç†æ˜¯è¿ç»´å›¢é˜Ÿçš„æ ¸å¿ƒèŒè´£ä¹‹ä¸€ã€‚

| æ—¥è¯­æœ¯è¯­ | å«ä¹‰ | å…¸å‹åœºæ™¯ |
|----------|------|----------|
| ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ | è´¦æˆ·åˆ›å»º | æ–°å‘˜å·¥å…¥èŒæ—¶ |
| ã‚¢ã‚«ã‚¦ãƒ³ãƒˆå‰Šé™¤ | è´¦æˆ·åˆ é™¤ | å‘˜å·¥ç¦»èŒæ—¶ |
| æ¨©é™å¤‰æ›´ | æƒé™å˜æ›´ | å²—ä½è°ƒåŠ¨æ—¶ |
| æ£šå¸ã—ï¼ˆãŸãªãŠã‚ã—ï¼‰ | è´¦æˆ·å®¡è®¡ | å®šæœŸæ£€æŸ¥ |

### å‘½åè§„èŒƒ

æ—¥æœ¬ä¼ä¸šå¸¸ç”¨çš„ç”¨æˆ·åè§„èŒƒï¼š

```bash
# æ–¹å¼ 1ï¼šå‘˜å·¥å·
useradd -m -c "ç”°ä¸­å¤ªéƒ" e12345

# æ–¹å¼ 2ï¼šå§“æ°æ‹¼éŸ³
useradd -m -c "ç”°ä¸­å¤ªéƒ" tanaka

# æ–¹å¼ 3ï¼šå§“æ° + åå­—é¦–å­—æ¯
useradd -m -c "ç”°ä¸­å¤ªéƒ" tanaka_t
```

### å®šæœŸå®¡è®¡ï¼ˆæ£šå¸ã—ï¼‰

```bash
# åˆ—å‡ºæ‰€æœ‰æ™®é€šç”¨æˆ·ï¼ˆUID >= 1000ï¼‰
awk -F: '$3 >= 1000 && $3 < 65534 {print $1, $5}' /etc/passwd

# æŸ¥çœ‹æœ€è¿‘ç™»å½•è®°å½•
lastlog | grep -v "Never"

# æŸ¥çœ‹é•¿æœŸæœªç™»å½•çš„è´¦æˆ·
lastlog | awk '$NF != "in" && $NF != "**" {print $1}' | head -20
```

**é‡è¦**ï¼šç¦»èŒå‘˜å·¥çš„è´¦æˆ·å¿…é¡»åŠæ—¶åˆ é™¤æˆ–ç¦ç”¨ï¼ˆé€€è·æ™‚ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç„¡åŠ¹åŒ–ï¼‰ã€‚

---

## æ£€æŸ¥æ¸…å•

å®Œæˆæœ¬è¯¾åï¼Œä½ åº”è¯¥èƒ½å¤Ÿï¼š

- [ ] è§£é‡Š Linux å¤šç”¨æˆ·æ¨¡å‹çš„æ„ä¹‰
- [ ] è¯»æ‡‚ /etc/passwd çš„ 7 ä¸ªå­—æ®µ
- [ ] è¯»æ‡‚ /etc/group çš„ 4 ä¸ªå­—æ®µ
- [ ] åŒºåˆ†ç³»ç»Ÿç”¨æˆ·ï¼ˆUID < 1000ï¼‰å’Œæ™®é€šç”¨æˆ·
- [ ] ä½¿ç”¨ `useradd -m -s /bin/bash` åˆ›å»ºç”¨æˆ·
- [ ] ä½¿ç”¨ `passwd` è®¾ç½®ç”¨æˆ·å¯†ç 
- [ ] ä½¿ç”¨ `usermod -aG` æ·»åŠ ç”¨æˆ·åˆ°é™„åŠ ç»„ï¼ˆæ³¨æ„ -aï¼ï¼‰
- [ ] ä½¿ç”¨ `userdel -r` å®Œå…¨åˆ é™¤ç”¨æˆ·
- [ ] ä½¿ç”¨ `groupadd` å’Œ `groupdel` ç®¡ç†ç»„
- [ ] ä½¿ç”¨ `id` å’Œ `groups` éªŒè¯ç”¨æˆ·ä¿¡æ¯

---

## æœ¬è¯¾å°ç»“

| æ¦‚å¿µ | å‘½ä»¤/æ–‡ä»¶ | è®°å¿†ç‚¹ |
|------|-----------|--------|
| ç”¨æˆ·æ•°æ®åº“ | `/etc/passwd` | 7 ä¸ªå­—æ®µï¼Œå†’å·åˆ†éš” |
| ç»„æ•°æ®åº“ | `/etc/group` | 4 ä¸ªå­—æ®µï¼Œæˆå‘˜é€—å·åˆ†éš” |
| æŸ¥çœ‹ç”¨æˆ·ä¿¡æ¯ | `id`, `whoami` | id æ˜¾ç¤ºæ‰€æœ‰ç»„ |
| åˆ›å»ºç”¨æˆ· | `useradd -m -s` | å¿…é¡»åŠ  -m åˆ›å»º home |
| è®¾ç½®å¯†ç  | `passwd` | æ–°ç”¨æˆ·å¿…é¡»è®¾ç½® |
| ä¿®æ”¹ç”¨æˆ· | `usermod -aG` | åŠ ç»„å¿…é¡»å¸¦ -a |
| åˆ é™¤ç”¨æˆ· | `userdel -r` | åŠ  -r æ¸…ç† home |
| åˆ›å»ºç»„ | `groupadd` | å¯ç”¨ -g æŒ‡å®š GID |
| åˆ é™¤ç»„ | `groupdel` | ä¸»ç»„ä¸èƒ½åˆ é™¤ |

---

## å»¶ä¼¸é˜…è¯»

- [Linux man page: useradd](https://man7.org/linux/man-pages/man8/useradd.8.html)
- [Linux man page: passwd (file)](https://man7.org/linux/man-pages/man5/passwd.5.html)
- ä¸‹ä¸€è¯¾ï¼š[02 - å¯†ç ä¸è´¦æˆ·ç®¡ç†](../02-password-account-management/) -- å­¦ä¹ å¯†ç ç­–ç•¥ã€è´¦æˆ·é”å®šä¸å®¡è®¡
- ç›¸å…³è¯¾ç¨‹ï¼š[06 - sudo é…ç½®](../06-sudo-configuration/) -- æƒé™æå‡çš„å®‰å…¨ç®¡ç†

---

## ç³»åˆ—å¯¼èˆª

[ç³»åˆ—é¦–é¡µ](../) | [02 - å¯†ç ä¸è´¦æˆ·ç®¡ç† -->](../02-password-account-management/)
