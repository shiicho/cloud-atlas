# 05 Â· æŸ¥çœ‹æ–‡ä»¶å†…å®¹

> **ç›®æ ‡**ï¼šæŒæ¡æŸ¥çœ‹å’Œæµè§ˆæ–‡ä»¶å†…å®¹çš„å„ç§æ–¹æ³•
> **å‰ç½®**ï¼šå·²å®Œæˆ [04 Â· æ–‡ä»¶å’Œç›®å½•](../04-files-directories/)
> **æ—¶é—´**ï¼šâš¡ 20 åˆ†é’Ÿï¼ˆé€Ÿè¯»ï¼‰/ ğŸ”¬ 60 åˆ†é’Ÿï¼ˆå®Œæ•´å®æ“ï¼‰
> **ç¯å¢ƒ**ï¼šä»»æ„ Linux å‘è¡Œç‰ˆ  

---

## å°†å­¦åˆ°çš„å†…å®¹

1. ç”¨ `cat` æŸ¥çœ‹å®Œæ•´æ–‡ä»¶
2. ç”¨ `head` å’Œ `tail` é¢„è§ˆå¼€å¤´å’Œç»“å°¾
3. ç”¨ `less` æµè§ˆå¤§æ–‡ä»¶
4. ç”¨ `tail -f` å®æ—¶ç›‘æ§æ—¥å¿—

---

## Step 1 â€” å…ˆè·‘èµ·æ¥ï¼šå‘ç°ç³»ç»Ÿç§˜å¯†ï¼ˆ2 åˆ†é’Ÿï¼‰

> ğŸ¯ **ç›®æ ‡**ï¼šç”¨ä¸€ä¸ªå‘½ä»¤çœ‹åˆ°ä½ çš„æ“ä½œç³»ç»Ÿä¿¡æ¯ã€‚  

```bash
cat /etc/os-release
```

**çœ‹åˆ°äº†ä»€ä¹ˆï¼Ÿ**

```
PRETTY_NAME="Ubuntu 22.04.3 LTS"
NAME="Ubuntu"
VERSION_ID="22.04"
VERSION="22.04.3 LTS (Jammy Jellyfish)"
VERSION_CODENAME=jammy
ID=ubuntu
ID_LIKE=debian
HOME_URL="https://www.ubuntu.com/"
SUPPORT_URL="https://help.ubuntu.com/"
BUG_REPORT_URL="https://bugs.launchpad.net/ubuntu/"
```

ğŸ‰ **åŸæ¥ç³»ç»Ÿä¿¡æ¯å°±æ˜¯ä¸€ä¸ªæ™®é€šçš„æ–‡æœ¬æ–‡ä»¶ï¼**

Linux çš„å“²å­¦ï¼šä¸€åˆ‡çš†æ–‡ä»¶ã€‚é…ç½®ã€æ—¥å¿—ã€è®¾å¤‡ä¿¡æ¯ï¼Œéƒ½æ˜¯å¯è¯»çš„æ–‡æœ¬ã€‚

---

## Step 2 â€” catï¼šä¸€æ¬¡çœ‹å®Œï¼ˆ15 åˆ†é’Ÿï¼‰

### 2.1 åŸºæœ¬ç”¨æ³•

```bash
cat /etc/hostname
```

```
linux-lab
```

`cat` = con**cat**enateï¼ˆè¿æ¥ï¼‰ï¼Œä¹Ÿå¸¸ç”¨äºæŸ¥çœ‹æ–‡ä»¶ã€‚

### 2.2 æŸ¥çœ‹å¤šä¸ªæ–‡ä»¶

```bash
cat file1.txt file2.txt
```

è¿™å°±æ˜¯"è¿æ¥"çš„æœ¬æ„â€”â€”æŠŠå¤šä¸ªæ–‡ä»¶å†…å®¹è¿åœ¨ä¸€èµ·è¾“å‡ºã€‚

### 2.3 å¸¦è¡Œå·

```bash
cat -n /etc/passwd
```

```
     1	root:x:0:0:root:/root:/bin/bash
     2	daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin
     3	bin:x:2:2:bin:/bin:/usr/sbin/nologin
     ...
```

### 2.4 cat çš„é™åˆ¶

```bash
# å¯¹äºå¤§æ–‡ä»¶ï¼Œcat ä¸æ˜¯å¥½é€‰æ‹©
cat /var/log/syslog  # å¯èƒ½åˆ·å±å‡ åˆ†é’Ÿï¼
```

> âš ï¸ **æ³¨æ„**ï¼š`cat` é€‚åˆå°æ–‡ä»¶ã€‚å¤§æ–‡ä»¶ç”¨ `less` æˆ– `head`/`tail`ã€‚  

---

## Step 3 â€” head å’Œ tailï¼šçœ‹å¼€å¤´å’Œç»“å°¾ï¼ˆ20 åˆ†é’Ÿï¼‰

> **ğŸ“¦ å‘è¡Œç‰ˆå…¼å®¹æ€§**ï¼šæœ¬èŠ‚ä½¿ç”¨ `/var/log/syslog` ä½œä¸ºç¤ºä¾‹ï¼ˆUbuntu/Debianï¼‰ã€‚
> - **RHEL/CentOS/AlmaLinux**: ä½¿ç”¨ `/var/log/messages`
> - **ç°ä»£ systemd ç³»ç»Ÿ**: æ¨èä½¿ç”¨ `journalctl`ï¼ˆåç»­è¯¾ç¨‹è¯¦ç»†ä»‹ç»ï¼‰
>
> ```bash
> # RHEL ç³»åˆ—æ›¿ä»£å‘½ä»¤
> head /var/log/messages
> tail -f /var/log/messages
>
> # systemd æ—¥å¿—ï¼ˆæ¨èï¼‰
> journalctl -n 20          # æœ€è¿‘ 20 æ¡
> journalctl -f             # å®æ—¶è·Ÿè¸ª
> ```

### 3.1 head - çœ‹å¼€å¤´

```bash
# é»˜è®¤æ˜¾ç¤ºå‰ 10 è¡Œ
head /var/log/syslog

# æŒ‡å®šè¡Œæ•°
head -n 5 /var/log/syslog
# æˆ–ç®€å†™
head -5 /var/log/syslog
```

### 3.2 tail - çœ‹ç»“å°¾

```bash
# é»˜è®¤æ˜¾ç¤ºæœ€å 10 è¡Œ
tail /var/log/syslog

# æŒ‡å®šè¡Œæ•°
tail -n 20 /var/log/syslog
# æˆ–ç®€å†™
tail -20 /var/log/syslog
```

### 3.3 å®ç”¨åœºæ™¯

| å‘½ä»¤ | ä½¿ç”¨åœºæ™¯ |
|------|----------|
| `head -1 file` | æŸ¥çœ‹æ–‡ä»¶æ ‡é¢˜è¡Œ |
| `tail -20 /var/log/syslog` | æŸ¥çœ‹æœ€è¿‘çš„æ—¥å¿— |
| `head -100 bigfile.csv` | é¢„è§ˆå¤§æ–‡ä»¶ç»“æ„ |

### 3.4 ç»„åˆä½¿ç”¨

```bash
# æŸ¥çœ‹ç¬¬ 11-20 è¡Œ
head -20 file.txt | tail -10

# æŸ¥çœ‹ç¬¬ 5 è¡Œ
head -5 file.txt | tail -1
```

---

## Step 4 â€” lessï¼šå¤§æ–‡ä»¶æµè§ˆå™¨ï¼ˆ20 åˆ†é’Ÿï¼‰

### 4.1 ä¸ºä»€ä¹ˆç”¨ lessï¼Ÿ

- ä¸ä¼šä¸€æ¬¡åŠ è½½æ•´ä¸ªæ–‡ä»¶åˆ°å†…å­˜
- å¯ä»¥å‰åç¿»é¡µ
- æ”¯æŒæœç´¢
- é€€å‡ºåå±å¹•å¹²å‡€

```bash
less /var/log/syslog
```

### 4.2 less å¯¼èˆªé”®

![Less Navigation](images/less-navigation.png)

<details>
<summary>View ASCII source</summary>

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     less å¯¼èˆªé€ŸæŸ¥                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  ç§»åŠ¨ï¼š                                                      â”‚
â”‚    Space / f     ä¸‹ä¸€é¡µ                                      â”‚
â”‚    b             ä¸Šä¸€é¡µ                                      â”‚
â”‚    â†“ / j         ä¸‹ä¸€è¡Œ                                      â”‚
â”‚    â†‘ / k         ä¸Šä¸€è¡Œ                                      â”‚
â”‚    g             è·³åˆ°å¼€å¤´                                    â”‚
â”‚    G             è·³åˆ°ç»“å°¾                                    â”‚
â”‚                                                             â”‚
â”‚  æœç´¢ï¼š                                                      â”‚
â”‚    /pattern      å‘ä¸‹æœç´¢ pattern                            â”‚
â”‚    ?pattern      å‘ä¸Šæœç´¢ pattern                            â”‚
â”‚    n             ä¸‹ä¸€ä¸ªåŒ¹é…                                  â”‚
â”‚    N             ä¸Šä¸€ä¸ªåŒ¹é…                                  â”‚
â”‚                                                             â”‚
â”‚  é€€å‡ºï¼š                                                      â”‚
â”‚    q             é€€å‡º                                        â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

</details>

| æŒ‰é”® | åŠ¨ä½œ |
|------|------|
| `Space` æˆ– `f` | ä¸‹ä¸€é¡µ |
| `b` | ä¸Šä¸€é¡µ |
| `g` | è·³åˆ°å¼€å¤´ |
| `G` | è·³åˆ°ç»“å°¾ |
| `/pattern` | å‘ä¸‹æœç´¢ |
| `n` | ä¸‹ä¸€ä¸ªåŒ¹é… |
| `N` | ä¸Šä¸€ä¸ªåŒ¹é… |
| `q` | é€€å‡º |

### 4.3 å®è·µç»ƒä¹ 

```bash
# æ‰“å¼€æ—¥å¿—æ–‡ä»¶
less /var/log/syslog

# è¯•è¯•ä»¥ä¸‹æ“ä½œï¼š
# 1. æŒ‰ Space ç¿»é¡µ
# 2. æŒ‰ G è·³åˆ°æœ«å°¾
# 3. æŒ‰ g å›åˆ°å¼€å¤´
# 4. è¾“å…¥ /error æœç´¢ "error"
# 5. æŒ‰ n æ‰¾ä¸‹ä¸€ä¸ª
# 6. æŒ‰ q é€€å‡º
```

---

## Step 5 â€” tail -fï¼šå®æ—¶ç›‘æ§æ—¥å¿—ï¼ˆ15 åˆ†é’Ÿï¼‰

### 5.1 è¿ç»´äººå‘˜çš„ç§˜å¯†æ­¦å™¨

```bash
tail -f /var/log/syslog
```

`-f` = followï¼ˆè·Ÿéšï¼‰ã€‚æ–‡ä»¶æœ‰æ–°å†…å®¹æ—¶ï¼Œè‡ªåŠ¨æ˜¾ç¤ºï¼

### 5.2 ä¸ºä»€ä¹ˆè¿™å¾ˆé‡è¦ï¼Ÿ

åœ¨æ—¥æœ¬ IT è¿ç»´ï¼ˆéšœå®³å¯¾å¿œï¼‰ä¸­ï¼Œ`tail -f` æ˜¯ï¼š
- å®æ—¶ç›‘æ§åº”ç”¨æ—¥å¿—
- è§‚å¯ŸæœåŠ¡å¯åŠ¨è¿‡ç¨‹
- è°ƒè¯•é—®é¢˜æ—¶è·Ÿè¸ªè¾“å‡º

### 5.3 å®è·µæ¼”ç¤º

æ‰“å¼€ä¸¤ä¸ªç»ˆç«¯çª—å£ï¼š

**ç»ˆç«¯ 1ï¼šç›‘æ§æ—¥å¿—**

```bash
tail -f /var/log/syslog
```

**ç»ˆç«¯ 2ï¼šäº§ç”Ÿæ—¥å¿—**

```bash
logger "This is a test message from terminal 2"
```

**è§‚å¯Ÿç»ˆç«¯ 1**ï¼šä½ ä¼šçœ‹åˆ°æ–°æ¶ˆæ¯å®æ—¶å‡ºç°ï¼

### 5.4 ç›‘æ§å¤šä¸ªæ–‡ä»¶

```bash
# åŒæ—¶ç›‘æ§å¤šä¸ªæ—¥å¿—
tail -f /var/log/syslog /var/log/auth.log
```

### 5.5 é€€å‡º

æŒ‰ `Ctrl + C` åœæ­¢ç›‘æ§ã€‚

---

## Step 6 â€” ç»¼åˆç»ƒä¹ ï¼ˆ5 åˆ†é’Ÿï¼‰

### 6.1 æ—¥å¿—ä¾¦æ¢

```bash
# 1. æŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯
cat /etc/os-release

# 2. é¢„è§ˆå¤§æ—¥å¿—
head -20 /var/log/syslog
tail -20 /var/log/syslog

# 3. æµè§ˆæ—¥å¿—ï¼Œæœç´¢é”™è¯¯
less /var/log/syslog
# è¾“å…¥ /error æœç´¢

# 4. å®æ—¶ç›‘æ§
tail -f /var/log/syslog
# Ctrl+C é€€å‡º
```

### 6.2 é€‰æ‹©æ­£ç¡®çš„å·¥å…·

| åœºæ™¯ | ä½¿ç”¨ |
|------|------|
| å°é…ç½®æ–‡ä»¶ | `cat` |
| æŸ¥çœ‹æ—¥å¿—æœ€åå‡ è¡Œ | `tail -20` |
| æµè§ˆå¤§æ–‡ä»¶ | `less` |
| å®æ—¶ç›‘æ§ | `tail -f` |
| æŸ¥çœ‹æ–‡ä»¶å¼€å¤´ | `head` |

---

## æœ¬è¯¾å°ç»“

| å‘½ä»¤ | ç”¨é€” | å…³é”®é€‰é¡¹ |
|------|------|----------|
| `cat` | å®Œæ•´è¾“å‡º | `-n`ï¼ˆè¡Œå·ï¼‰ |
| `head` | çœ‹å¼€å¤´ | `-n æ•°å­—` |
| `tail` | çœ‹ç»“å°¾ | `-n æ•°å­—`, `-f`ï¼ˆè·Ÿéšï¼‰ |
| `less` | æµè§ˆå¤§æ–‡ä»¶ | ç”¨ `/` æœç´¢ï¼Œ`q` é€€å‡º |

**æ ¸å¿ƒç†å¿µ**ï¼šé€‰æ‹©åˆé€‚çš„å·¥å…·ã€‚å°æ–‡ä»¶ç”¨ `cat`ï¼Œå¤§æ–‡ä»¶ç”¨ `less`ï¼Œæ—¥å¿—ç”¨ `tail -f`ã€‚

---

## ä¸‹ä¸€æ­¥

ä½ ç°åœ¨èƒ½æŸ¥çœ‹å„ç§æ–‡ä»¶äº†ã€‚æ¥ä¸‹æ¥å­¦ä¹ å¦‚ä½•"æ±‚åŠ©"â€”â€”ä½¿ç”¨ man æ‰‹å†Œå’Œå¸®åŠ©ç³»ç»Ÿã€‚

â†’ [06 Â· è·å–å¸®åŠ©](../06-getting-help/)

---

## é¢è¯•å‡†å¤‡

ğŸ’¼ **ã‚ˆãã‚ã‚‹è³ªå•**

**Q: cat, less, more ã®é•ã„ã¯ï¼Ÿ**

A: `cat` ã¯å…¨å†…å®¹ã‚’ä¸€åº¦ã«å‡ºåŠ›ã€`more` ã¯å‰æ–¹ã®ã¿ãƒšãƒ¼ã‚¸ãƒ³ã‚°ã€`less` ã¯åŒæ–¹å‘ãƒšãƒ¼ã‚¸ãƒ³ã‚°ï¼‹æ¤œç´¢ã€‚`less` ãŒæœ€ã‚‚æ©Ÿèƒ½è±Šå¯Œã§ã™ã€‚

**Q: tail -f ã®å®Ÿå‹™ã§ã®ä½¿ã„æ–¹ã¯ï¼Ÿ**

A: éšœå®³å¯¾å¿œã§ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ­ã‚°ç›£è¦–ã€‚ä¾‹ï¼š`tail -f /var/log/nginx/error.log` ã§ã‚¨ãƒ©ãƒ¼ã‚’å³åº§ã«ç¢ºèªã€‚

**Q: å¤§ããªãƒ•ã‚¡ã‚¤ãƒ«ã§ç‰¹å®šã®è¡Œã‚’è¦‹ã‚‹ã«ã¯ï¼Ÿ**

A: `sed -n '100p' file` ã§ 100 è¡Œç›®ã€ã¾ãŸã¯ `head -100 file | tail -1`ã€‚å¤§é‡ã®å ´åˆã¯ `awk 'NR==100' file`ã€‚

---

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

ğŸ”§ **ã‚ˆãã‚ã‚‹å•é¡Œ**

**`less: command not found`**

```bash
# less ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
sudo apt install less    # Debian/Ubuntu
sudo yum install less    # RHEL/CentOS
```

**`cat` ãŒæ­¢ã¾ã‚‰ãªã„ï¼ˆå·¨å¤§ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰**

```bash
# Ctrl+C ã§ä¸­æ–­
# æ¬¡å›ã‹ã‚‰ head/less ã‚’ä½¿ã†
head -100 bigfile.txt
```

**æ—¥æœ¬èªãŒæ–‡å­—åŒ–ã‘ã™ã‚‹**

```bash
# ãƒ­ã‚±ãƒ¼ãƒ«è¨­å®š
export LANG=ja_JP.UTF-8

# ã¾ãŸã¯ less ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³
less -R file.txt
```

**`Permission denied` ã§èª­ã‚ãªã„**

```bash
# æ¨©é™ç¢ºèª
ls -la /path/to/file

# sudo ã§èª­ã‚€
sudo cat /var/log/secure
# ã¾ãŸã¯
sudo less /var/log/secure
```

---

## æ£€æŸ¥æ¸…å•

åœ¨ç»§ç»­ä¸‹ä¸€è¯¾ä¹‹å‰ï¼Œç¡®è®¤ä½ èƒ½ï¼š

- [ ] ä½¿ç”¨ `cat` æŸ¥çœ‹å°æ–‡ä»¶
- [ ] ä½¿ç”¨ `head -n` å’Œ `tail -n` æŒ‡å®šè¡Œæ•°
- [ ] åœ¨ `less` ä¸­ç¿»é¡µã€æœç´¢ã€é€€å‡º
- [ ] ä½¿ç”¨ `tail -f` å®æ—¶ç›‘æ§æ—¥å¿—
- [ ] ç”¨ `Ctrl+C` åœæ­¢ `tail -f`

---

## ç³»åˆ—å¯¼èˆª

â† [04 Â· æ–‡ä»¶å’Œç›®å½•](../04-files-directories/) | [Home](../) | [06 Â· è·å–å¸®åŠ© â†’](../06-getting-help/)
