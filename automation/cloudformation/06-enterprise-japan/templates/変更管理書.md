# 変更管理書（変更申請書）

> CloudFormation Stack 変更申請用テンプレート

---

## 基本情報

| 項目 | 内容 |
|------|------|
| **申請日** | YYYY/MM/DD |
| **申請者** | （氏名） |
| **所属** | （部署名） |
| **変更番号** | CHG-YYYYMMDD-XXX |
| **優先度** | [ ] 緊急 / [ ] 高 / [ ] 中 / [ ] 低 |

---

## 変更概要

### 変更タイトル

（簡潔に変更内容を記述）

### 変更目的

（なぜこの変更が必要か）

### 対象 Stack

| Stack 名 | AWS アカウント | リージョン |
|----------|---------------|-----------|
| | | |

---

## 変更内容詳細

### 変更種別

- [ ] 新規 Stack 作成 (Create)
- [ ] 既存 Stack 更新 (Update)
- [ ] Stack 削除 (Delete)
- [ ] パラメータ変更のみ
- [ ] その他:

### 変更されるリソース

| リソース論理 ID | リソースタイプ | 操作 | 備考 |
|----------------|---------------|------|------|
| | AWS::EC2::Instance | Add/Modify/Replace/Delete | |
| | | | |

### ChangeSet 情報

| 項目 | 値 |
|------|-----|
| ChangeSet 名 | |
| 作成日時 | |
| ChangeSet ARN | |

**ChangeSet プレビュー（スクリーンショット添付）**

<!-- ChangeSet のスクリーンショットをここに添付 -->

---

## 影響範囲

### 影響を受けるサービス/システム

- [ ] Web アプリケーション
- [ ] API サーバー
- [ ] データベース
- [ ] バッチ処理
- [ ] 監視システム
- [ ] その他:

### 影響を受けるユーザー

- [ ] エンドユーザー
- [ ] 社内ユーザー
- [ ] 開発チーム
- [ ] 運用チーム
- [ ] 影響なし

### 想定ダウンタイム

- [ ] なし（無停止）
- [ ] 1分未満
- [ ] 1-5分
- [ ] 5-30分
- [ ] 30分以上（詳細:              ）

---

## リスク評価

### リスクレベル

- [ ] 高：本番サービスに直接影響、ロールバック困難
- [ ] 中：一部サービスに影響、ロールバック可能
- [ ] 低：影響軽微、即座にロールバック可能

### 想定されるリスク

| リスク | 発生確率 | 影響度 | 対策 |
|--------|---------|-------|------|
| | 高/中/低 | 高/中/低 | |
| | | | |

---

## 作業スケジュール

### 作業予定

| 項目 | 日時 |
|------|------|
| 作業予定日時 | YYYY/MM/DD HH:MM - HH:MM |
| 作業時間帯 | [ ] 業務時間内 / [ ] 業務時間外 / [ ] メンテナンス時間 |

### 作業手順概要

1. 事前確認
   - [ ] ChangeSet 内容最終確認
   - [ ] 関係者への事前連絡完了
   - [ ] バックアップ取得（必要な場合）

2. 変更実行
   - [ ] ChangeSet 実行
   - [ ] Stack 状態監視
   - [ ] リソース動作確認

3. 事後確認
   - [ ] サービス正常性確認
   - [ ] 監視アラート確認
   - [ ] ログ確認

---

## 切り戻し手順

### 切り戻し判断基準

以下の場合、切り戻しを実施する：

- [ ] Stack 更新が失敗した場合（自動ロールバック）
- [ ] サービス正常性確認で異常が検出された場合
- [ ] 監視アラートが発報した場合
- [ ] その他:

### 切り戻し手順

**CloudFormation 自動ロールバックの場合：**

1. Stack イベントで `UPDATE_ROLLBACK_IN_PROGRESS` を確認
2. ロールバック完了まで監視
3. `UPDATE_ROLLBACK_COMPLETE` を確認
4. 原因調査

**手動切り戻しの場合：**

1. 前バージョンのテンプレートを使用して ChangeSet 作成
2. ChangeSet 内容確認
3. ChangeSet 実行
4. サービス正常性確認

### 切り戻し後の対応

- [ ] 原因調査
- [ ] 再発防止策検討
- [ ] 変更計画見直し
- [ ] 関係者への報告

---

## 承認

### 承認者

| 役割 | 氏名 | 承認日時 | 署名/承認 |
|------|------|---------|----------|
| 申請者 | | | |
| チームリーダー | | | |
| 運用責任者 | | | |
| 承認者（課長/部長） | | | |

### 承認条件

- [ ] 変更内容のレビュー完了
- [ ] リスク評価の確認
- [ ] 切り戻し手順の確認
- [ ] 作業時間帯の確認
- [ ] 関係者への連絡完了

---

## 作業実績

### 実施記録

| 項目 | 内容 |
|------|------|
| 実施日時 | YYYY/MM/DD HH:MM - HH:MM |
| 実施者 | |
| 結果 | [ ] 成功 / [ ] 失敗（ロールバック） / [ ] 中止 |

### 証跡

| 種別 | 保存場所 |
|------|---------|
| ChangeSet スクリーンショット | |
| Stack イベントログ | |
| CloudTrail ログ | |
| サービス確認結果 | |

### 備考

（作業中の特記事項があれば記載）

---

## 付録

### 関連ドキュメント

- [ ] 設計書（CFn テンプレート）
- [ ] 運用手順書
- [ ] テスト結果
- [ ] その他:

### 連絡先

| 役割 | 担当者 | 連絡先 |
|------|--------|-------|
| 変更責任者 | | |
| 運用担当 | | |
| 緊急連絡先 | | |

---

**文書管理**

| 項目 | 内容 |
|------|------|
| 文書番号 | DOC-CFN-CHG-001 |
| 版数 | v1.0 |
| 作成日 | YYYY/MM/DD |
| 最終更新日 | YYYY/MM/DD |
| 作成者 | |

---

*このテンプレートは CloudFormation 課程 Lesson 06 の教材です。*
*実際の業務では、組織のルールに合わせてカスタマイズしてください。*
